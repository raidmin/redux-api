{"version":3,"sources":["../../src/adapters/fetch.js"],"names":["fetch","url","opts","then","toJSON","resp","data","status","Promise","reject","text","JSON","parse","err"],"mappings":"AAAA;;;;;;kBAYe,UAAUA,KAAV,EAAiB;AAC9B,SAAO,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AAC1B,WAAOF,MAAMC,GAAN,EAAWC,IAAX,EAAiBC,IAAjB,CAAsB;AAAA,aAAOC,OAAOC,IAAP,EACzBF,IADyB,CACpB,UAACG,IAAD,EAAS;AACb,YAAID,KAAKE,MAAL,IAAe,GAAf,IAAsBF,KAAKE,MAAL,GAAc,GAAxC,EAA6C;AAC3C,iBAAOD,IAAP;AACD,SAFD,MAEO;AACL,iBAAOE,QAAQC,MAAR,CAAeH,IAAf,CAAP;AACD;AACF,OAPyB,CAAP;AAAA,KAAtB,CAAP;AASD,GAVD;AAWD,C;;AAtBD,SAASF,MAAT,CAAgBC,IAAhB,EAAsB;AACpB,SAAOA,KAAKK,IAAL,GAAYP,IAAZ,CAAiB,UAACG,IAAD,EAAS;AAC/B,QAAI;AACF,aAAOK,KAAKC,KAAL,CAAWN,IAAX,CAAP;AACD,KAFD,CAEE,OAAOO,GAAP,EAAY;AACZ,aAAOP,IAAP;AACD;AACF,GANM,CAAP;AAOD","file":"fetch.js","sourcesContent":["\"use strict\";\n\nfunction toJSON(resp) {\n  return resp.text().then((data)=> {\n    try {\n      return JSON.parse(data);\n    } catch (err) {\n      return data;\n    }\n  });\n}\n\nexport default function (fetch) {\n  return function (url, opts) {\n    return fetch(url, opts).then(resp=> toJSON(resp)\n              .then((data)=> {\n                if (resp.status >= 200 && resp.status < 300) {\n                  return data;\n                } else {\n                  return Promise.reject(data);\n                }\n              })\n    );\n  };\n}\n"]}