{"version":3,"sources":["../src/reducerFn.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","default","reducerFn","_cache","require","_defineProperty","obj","enumerable","configurable","writable","initialState","actions","undefined","reducer","actionFetch","actionSuccess","actionFail","actionReset","actionCache","actionAbort","state","action","type","merge","loading","error","syncing","sync","data","mutation","id","cacheExpire","cache","expire","setExpire","module"],"mappings":"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","file":"reducerFn.js","sourcesContent":["\"use strict\";\n\n/* eslint no-case-declarations: 0 */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = reducerFn;\n\nvar _cache = require(\"./utils/cache\");\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/**\n * Reducer contructor\n * @param  {Object}   initialState default initial state\n * @param  {Object}   actions      actions map\n * @param  {Function} transformer  transformer function\n * @param  {Function} reducer      custom reducer function\n * @return {Function}              reducer function\n */\nfunction reducerFn(initialState) {\n  var actions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var reducer = arguments[2];\n  var actionFetch = actions.actionFetch,\n      actionSuccess = actions.actionSuccess,\n      actionFail = actions.actionFail,\n      actionReset = actions.actionReset,\n      actionCache = actions.actionCache,\n      actionAbort = actions.actionAbort;\n\n  return function () {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n    var action = arguments[1];\n\n    switch (action.type) {\n      case actionFetch:\n        return state.merge({\n          loading: true,\n          error: null,\n          syncing: !!action.syncing\n        });\n      case actionSuccess:\n        return state.merge({\n          loading: false,\n          sync: true,\n          syncing: false,\n          error: null,\n          data: action.data\n        });\n      case actionFail:\n        return state.merge({\n          loading: false,\n          error: action.error,\n          syncing: false\n        });\n      case actionReset:\n        var mutation = action.mutation;\n\n        return mutation === \"sync\" ? state.merge({ sync: false }) : state.merge(initialState);\n      case actionAbort:\n        return state.merge({ loading: false, syncing: false, error: action.error });\n      case actionCache:\n        var id = action.id,\n            data = action.data;\n\n        var cacheExpire = state.cache[id] ? state.cache[id].expire : null;\n        var expire = (0, _cache.setExpire)(action.expire, cacheExpire);\n        return _extends({}, state, {\n          cache: _extends({}, state.cache, _defineProperty({}, id, { expire: expire, data: data }))\n        });\n      default:\n        return reducer ? reducer(state, action) : state;\n    }\n  };\n}\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=reducerFn.js.map\n"]}